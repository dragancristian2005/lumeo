<nav
  class="border-r-2 border-gray-200 h-full px-2 flex flex-col justify-between"
>
  <ul class="flex flex-col gap-2 items-center p-4">
    <li>
      <a
        routerLink="/home"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/home'),
          'text-gray-500': !isActive('/home'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
      >
        <svg
          *ngIf="!isActive('/home')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/home')"
        >
          <path
            d="M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/home')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/home')"
        >
          <path
            d="M160-200v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H600q-17 0-28.5-11.5T560-160v-200q0-17-11.5-28.5T520-400h-80q-17 0-28.5 11.5T400-360v200q0 17-11.5 28.5T360-120H240q-33 0-56.5-23.5T160-200Z"
          />
        </svg>
      </a>
    </li>

    <li>
      <a
        routerLink="/explore"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/explore'),
          'text-gray-500': !isActive('/explore'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
      >
        <svg
          *ngIf="!isActive('/explore')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/explore')"
        >
          <path
            d="m300-300 280-80 80-280-280 80-80 280Zm180-120q-25 0-42.5-17.5T420-480q0-25 17.5-42.5T480-540q25 0 42.5 17.5T540-480q0 25-17.5 42.5T480-420Zm0 340q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Zm0-320Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/explore')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/explore')"
        >
          <path
            d="m335-310 202-58q20-6 34.5-20.5T592-423l58-202q3-11-5.5-19.5T625-650l-202 58q-20 6-34.5 20.5T368-537l-58 202q-3 11 5.5 19.5T335-310Zm145-110q-25 0-42.5-17.5T420-480q0-25 17.5-42.5T480-540q25 0 42.5 17.5T540-480q0 25-17.5 42.5T480-420Zm0 340q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"
          />
        </svg>
      </a>
    </li>

    <li>
      <a
        routerLink="/notifications"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/notifications'),
          'text-gray-500': !isActive('/notifications'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
        ><svg
          *ngIf="!isActive('/notifications')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/notifications')"
        >
          <path
            d="M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Zm320-300Zm0 420q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-280h320v-280q0-66-47-113t-113-47q-66 0-113 47t-47 113v280Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/notifications')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/notifications')"
        >
          <path
            d="M200-200q-17 0-28.5-11.5T160-240q0-17 11.5-28.5T200-280h40v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h40q17 0 28.5 11.5T800-240q0 17-11.5 28.5T760-200H200ZM480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80Z"
          />
        </svg>
      </a>
    </li>

    <li>
      <a
        routerLink="/messages"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/messages'),
          'text-gray-500': !isActive('/messages'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
        ><svg
          *ngIf="!isActive('/messages')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/messages')"
        >
          <path
            d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/messages')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/messages')"
        >
          <path
            d="m240-240-92 92q-19 19-43.5 8.5T80-177v-623q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240Zm40-160h240q17 0 28.5-11.5T560-440q0-17-11.5-28.5T520-480H280q-17 0-28.5 11.5T240-440q0 17 11.5 28.5T280-400Zm0-120h400q17 0 28.5-11.5T720-560q0-17-11.5-28.5T680-600H280q-17 0-28.5 11.5T240-560q0 17 11.5 28.5T280-520Zm0-120h400q17 0 28.5-11.5T720-680q0-17-11.5-28.5T680-720H280q-17 0-28.5 11.5T240-680q0 17 11.5 28.5T280-640Z"
          />
        </svg>
      </a>
    </li>

    <li>
      <a
        routerLink="/saved"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/saved'),
          'text-gray-500': !isActive('/saved'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
        ><svg
          *ngIf="!isActive('/saved')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/saved')"
        >
          <path
            d="M200-120v-640q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v640L480-240 200-120Zm80-122 200-86 200 86v-518H280v518Zm0-518h400-400Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/saved')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/saved')"
        >
          <path
            d="m480-240-168 72q-40 17-76-6.5T200-241v-519q0-33 23.5-56.5T280-840h400q33 0 56.5 23.5T760-760v519q0 43-36 66.5t-76 6.5l-168-72Z"
          /></svg
      ></a>
    </li>
  </ul>
  <ul class="flex flex-col items-center gap-4">
    <li>
      <button
        class="bg-primary py-0.75 px-3.5 rounded-xl text-white font-sans font-semibold text-title"
        (click)="openModal()"
      >
        +
      </button>
    </li>

    <li>
      <a
        routerLink="/profile"
        routerLinkActive="active-link"
        [ngClass]="{
          'text-primary bg-secondary': isActive('/profile'),
          'text-gray-500': !isActive('/profile'),
        }"
        class="relative inline-block py-2 px-3 text-gray-500 hover:bg-secondary rounded-xl transition-colors duration-200"
        ><svg
          *ngIf="!isActive('/profile')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="!isActive('/profile')"
        >
          <path
            d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"
          />
        </svg>
        <svg
          *ngIf="isActive('/profile')"
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          class="fill-current relative z-10 transition-opacity duration-300 opacity-0"
          [class.opacity-100]="isActive('/profile')"
        >
          <path
            d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"
          />
        </svg>
      </a>
    </li>
  </ul>
</nav>

<div
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
  [ngClass]="{ block: isModalOpen, hidden: !isModalOpen }"
  (click)="closeModal()"
>
  <div
    class="bg-white p-6 rounded-2xl w-1/2 relative"
    (click)="$event.stopPropagation()"
  >
    <h2 class="font-sans text-title font-semibold mb-4">Create a New Post</h2>
    <form (ngSubmit)="onSubmit()" class="flex flex-col h-full">
      <textarea
        [(ngModel)]="postTitle"
        name="title"
        placeholder="What's on your mind?"
        required
        class="w-full min-h-14 p-3 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-1 focus:ring-primary"
      ></textarea>
      <textarea
        [(ngModel)]="postContent"
        name="content"
        placeholder="Tell us more about it!"
        required
        class="w-full min-h-36 p-3 border border-gray-300 rounded-xl mb-4 focus:outline-none focus:ring-1 focus:ring-primary"
      ></textarea>

      <div class="mb-4">
        <h3 class="font-sans text-text font-semibold mb-2">Select Topics:</h3>
        <input
          type="text"
          [(ngModel)]="searchQuery"
          [ngModelOptions]="{ standalone: true }"
          class="w-full h-10 px-5 bg-gray-100 rounded-xl outline-none mb-5"
          placeholder="Search topics"
        />
        <div class="flex flex-wrap gap-2 max-h-36 overflow-y-auto">
          <button
            *ngFor="let topic of filteredTopics"
            type="button"
            (click)="toggleTopic(topic)"
            [ngClass]="{
              'bg-primary text-white': selectedTopics.includes(topic),
              'bg-gray-200 text-gray-700': !selectedTopics.includes(topic),
            }"
            class="px-3 py-1 rounded-lg text-sm transition-all"
          >
            {{ topic }}
          </button>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="!postContent || !postTitle || selectedTopics.length === 0"
        class="w-full py-2 bg-primary text-white rounded-xl cursor-pointer disabled:bg-gray-400"
      >
        Post
      </button>
    </form>

    <button
      class="absolute top-4 right-4 text-gray-200 hover:text-black"
      (click)="closeModal()"
    >
      X
    </button>
  </div>
</div>
