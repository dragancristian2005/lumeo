<main
  *ngIf="chatFriendId; else noChatSelected"
  class="bg-secondary px-8 py-4 rounded-xl h-full flex flex-col justify-between"
>
  <h2 class="font-bold text-lg text-center border-b-2 p-2 mb-8">
    &#64;{{ selectedUsername }}
  </h2>
  <div class="overflow-y-auto scrollbar-hide h-full flex flex-col-reverse">
    <div>
      <ul class="flex flex-col gap-2">
        <li
          *ngFor="let message of messagesInfo$ | async"
          [class.user-message]="message.sender === currentUserId"
          [class.other-message]="message.sender !== currentUserId"
        >
          {{ message.content }}
        </li>
      </ul>
    </div>
  </div>
  <div class="mb-2 mt-4">
    <div class="flex flex-row gap-3 w-full">
      <input
        type="text"
        [(ngModel)]="messageContent"
        class="bg-gray-100 px-4 py-2 rounded-xl outline-none flex-1"
        placeholder="Type a message"
      />
      <button
        class="bg-primary px-2 py-2 rounded-2xl"
        (click)="sendNewMessage()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="30px"
          viewBox="0 -960 960 960"
          width="30px"
          class="bg-primary fill-white"
        >
          <path
            d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"
          />
        </svg>
      </button>
    </div>
  </div>
</main>

<ng-template #noChatSelected>
  <p class="text-gray-500 text-center mt-4">Select a chat to start messaging</p>
</ng-template>
